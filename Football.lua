local lagball = false
tfm.exec.disableAutoNewGame(true)
tfm.exec.disableAutoShaman(true)
tfm.exec.newGame('<C><P L="1200" F="8" G="0,7" MEDATA=";;;;-0;0::0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188:1-"/><Z><S><S T="10" X="9" Y="268" L="101" H="15" P="0,0,0.3,0,-90,0,0,0"/><S T="10" X="1193" Y="269" L="101" H="15" P="0,0,0.3,0,-90,0,0,0"/><S T="6" X="599" Y="390" L="1200" H="24" P="0,0,0.3,0.8,0,0,0,0" c="2"/><S T="6" X="599" Y="390" L="1200" H="24" P="0,0,0.3,0.2,0,0,0,0" c="3"/><S T="10" X="50" Y="346" L="101" H="65" P="0,0,0.3,0,0,0,0,0"/><S T="10" X="1148" Y="346" L="101" H="65" P="0,0,0.3,0,0,0,0,0"/><S T="10" X="50" Y="218" L="101" H="15" P="0,0,0.3,0,0,0,0,0"/><S T="10" X="1149" Y="218" L="101" H="15" P="0,0,0.3,0,0,0,0,0"/><S T="1" X="108" Y="371" L="55" H="22" P="0,0,0,0.2,40,0,0,0"/><S T="1" X="1097" Y="371" L="55" H="22" P="0,0,0,0.2,130,0,0,0"/><S T="14" X="5" Y="200" L="10" H="400" P="0,0,0.3,0.2,0,0,0,0"/><S T="14" X="1195" Y="200" L="10" H="400" P="0,0,0.3,0.2,0,0,0,0"/><S T="14" X="600" Y="5" L="1200" H="10" P="0,0,0.3,0.2,0,0,0,0"/><S T="15" X="51" Y="269" L="100" H="100" P="0,0,0,0,0,0,0,0" m=""/><S T="15" X="1148" Y="268" L="100" H="100" P="0,0,0,0,0,0,0,0" m=""/></S><D/><O/><L><JD c="097B00,10,0.9,0" P1="531.01,166.73" P2="550.01,152.73"/><JD c="097B00,10,0.9,0" P1="537.01,142.73" P2="550.01,130.73"/><JD c="097B00,10,0.9,0" P1="534.01,282.73" P2="528.01,304.73"/><JD c="0B0707,10,0.9,0" P1="381.01,312.73" P2="435.01,261.73"/><JD c="0B0707,10,0.9,0" P1="435.01,261.73" P2="478.01,222.73"/><JD c="0B0707,10,0.9,0" P1="478.01,222.73" P2="515.01,173.73"/><JD c="0B0707,10,0.9,0" P1="515.01,173.73" P2="526.01,153.73"/><JD c="0B0707,10,0.9,0" P1="526.01,153.73" P2="541.01,153.73"/><JD c="0B0707,10,0.9,0" P1="541.01,153.73" P2="535.01,167.73"/><JD c="0B0707,10,0.9,0" P1="541.01,153.73" P2="579.01,118.73"/><JD c="0B0707,10,0.9,0" P1="581.01,117.73" P2="581.01,94.73"/><JD c="0B0707,10,0.9,0" P1="581.01,94.73" P2="569.01,74.73"/><JD c="0B0707,10,0.9,0" P1="569.01,74.73" P2="567.01,61.73"/><JD c="0B0707,10,0.9,0" P1="567.01,58.73" P2="576.01,31.73"/><JD c="0B0707,10,0.9,0" P1="576.01,31.73" P2="595.01,21.73"/><JD c="0B0707,10,0.9,0" P1="595.01,21.73" P2="616.01,22.73"/><JD c="0B0707,10,0.9,0" P1="616.01,22.73" P2="630.01,32.73"/><JD c="0B0707,10,0.9,0" P1="630.01,32.73" P2="638.01,50.73"/><JD c="0B0707,10,0.9,0" P1="638.01,50.73" P2="647.01,82.73"/><JD c="0B0707,10,0.9,0" P1="647.01,82.73" P2="648.01,97.73"/><JD c="0B0707,10,0.9,0" P1="648.01,97.73" P2="641.01,102.73"/><JD c="0B0707,10,0.9,0" P1="647.01,75.73" P2="643.01,87.73"/><JD c="0B0707,10,0.9,0" P1="639.01,88.73" P2="639.01,130.73"/><JD c="0B0707,10,0.9,0" P1="639.01,130.73" P2="631.01,118.73"/><JD c="0B0707,10,0.9,0" P1="631.01,118.73" P2="611.01,119.73"/><JD c="0B0707,10,0.9,0" P1="611.01,119.73" P2="587.01,119.73"/><JD c="0B0707,10,0.9,0" P1="584.01,139.73" P2="598.01,131.73"/><JD c="0B0707,10,0.9,0" P1="598.01,131.73" P2="610.01,131.73"/><JD c="0B0707,10,0.9,0" P1="535.01,168.73" P2="551.01,147.73"/><JD c="0B0707,10,0.9,0" P1="551.01,147.73" P2="578.01,139.73"/><JD c="0B0707,10,0.9,0" P1="578.01,139.73" P2="602.01,143.73"/><JD c="0B0707,10,0.9,0" P1="602.01,143.73" P2="622.01,133.73"/><JD c="0B0707,10,0.9,0" P1="623.01,134.73" P2="638.01,139.73"/><JD c="0B0707,10,0.9,0" P1="638.01,139.73" P2="660.01,156.73"/><JD c="0B0707,10,0.9,0" P1="561.01,193.73" P2="560.01,203.73"/><JD c="0B0707,10,0.9,0" P1="560.01,203.73" P2="589.01,203.73"/><JD c="0B0707,10,0.9,0" P1="589.01,203.73" P2="573.01,279.73"/><JD c="0B0707,10,0.9,0" P1="573.01,279.73" P2="585.01,281.73"/><JD c="0B0707,10,0.9,0" P1="585.01,281.73" P2="596.01,241.73"/><JD c="0B0707,10,0.9,0" P1="596.01,241.73" P2="606.01,207.73"/><JD c="0B0707,10,0.9,0" P1="606.01,207.73" P2="600.01,194.73"/><JD c="0B0707,10,0.9,0" P1="600.01,193.73" P2="561.01,194.73"/><JD c="0B0707,10,0.9,0" P1="526.01,215.73" P2="557.01,270.73"/><JD c="0B0707,10,0.9,0" P1="558.01,271.73" P2="557.01,332.73"/><JD c="0B0707,10,0.9,0" P1="558.01,328.73" P2="555.01,366.73"/><JD c="0B0707,10,0.9,0" P1="555.01,366.73" P2="546.01,377.73"/><JD c="0B0707,10,0.9,0" P1="558.01,332.73" P2="592.01,329.73"/><JD c="0B0707,10,0.9,0" P1="592.01,329.73" P2="609.01,336.73"/><JD c="0B0707,10,0.9,0" P1="609.01,336.73" P2="646.01,330.73"/><JD c="0B0707,10,0.9,0" P1="646.01,330.73" P2="700.01,354.73"/><JD c="0B0707,10,0.9,0" P1="700.01,354.73" P2="708.01,376.73"/><JD c="0B0707,10,0.9,0" P1="701.01,356.73" P2="697.01,321.73"/><JD c="0B0707,10,0.9,0" P1="697.01,321.73" P2="698.01,315.73"/><JD c="0B0707,10,0.9,0" P1="699.01,315.73" P2="688.01,287.73"/><JD c="0B0707,10,0.9,0" P1="688.01,287.73" P2="676.01,239.73"/><JD c="0B0707,10,0.9,0" P1="669.01,221.73" P2="704.01,269.73"/><JD c="0B0707,10,0.9,0" P1="704.01,269.73" P2="739.01,303.73"/><JD c="0B0707,10,0.9,0" P1="739.01,303.73" P2="777.01,336.73"/><JD c="0B0707,10,0.9,0" P1="777.01,336.73" P2="794.01,312.73"/><JD c="0B0707,10,0.9,0" P1="794.01,311.73" P2="757.01,274.73"/><JD c="0B0707,10,0.9,0" P1="757.01,274.73" P2="728.01,240.73"/><JD c="0B0707,10,0.9,0" P1="728.01,240.73" P2="706.01,193.73"/><JD c="0B0707,10,0.9,0" P1="706.01,193.73" P2="690.01,151.73"/><JD c="0B0707,10,0.9,0" P1="690.01,151.73" P2="656.01,139.73"/><JD c="0B0707,10,0.9,0" P1="656.01,139.73" P2="631.01,122.73"/><JD c="0B0707,10,0.9,0" P1="680.01,152.73" P2="689.01,181.73"/><JD c="0B0707,10,0.9,0" P1="701.01,221.73" P2="708.01,245.73"/><JD c="0B0707,10,0.9,0" P1="708.01,245.73" P2="751.01,287.73"/><JD c="0B0707,10,0.9,0" P1="751.01,287.73" P2="779.01,320.73"/><JD c="0B0707,10,0.9,0" P1="783.01,310.73" P2="759.01,287.73"/><JD c="0B0707,10,0.9,0" P1="759.01,287.73" P2="729.01,250.73"/><JD c="0B0707,10,0.9,0" P1="729.01,250.73" P2="709.01,221.73"/><JD c="0B0707,10,0.9,0" P1="709.01,221.73" P2="708.01,211.73"/><JD c="0B0707,10,0.9,0" P1="708.01,211.73" P2="701.01,211.73"/><JD c="0B0707,3,0.9,0" P1="546.01,179.73" P2="542.01,160.73"/><JD c="0B0707,3,0.9,0" P1="542.01,160.73" P2="552.01,161.73"/><JD c="0B0707,3,0.9,0" P1="552.01,161.73" P2="552.01,167.73"/><JD c="0B0707,3,0.9,0" P1="552.01,167.73" P2="545.01,170.73"/><JD c="0B0707,3,0.9,0" P1="544.01,170.73" P2="556.01,177.73"/><JD c="0B0707,3,0.9,0" P1="566.01,159.73" P2="559.01,168.73"/><JD c="0B0707,3,0.9,0" P1="559.01,168.73" P2="566.01,173.73"/><JD c="0B0707,3,0.9,0" P1="566.01,173.73" P2="570.01,173.73"/><JD c="0B0707,3,0.9,0" P1="570.01,173.73" P2="570.01,165.73"/><JD c="0B0707,3,0.9,0" P1="570.01,165.73" P2="564.01,159.73"/><JD c="0B0707,3,0.9,0" P1="578.01,170.73" P2="580.01,155.73"/><JD c="0B0707,3,0.9,0" P1="580.01,155.73" P2="586.01,164.73"/><JD c="0B0707,3,0.9,0" P1="586.01,164.73" P2="588.01,154.73"/><JD c="0B0707,3,0.9,0" P1="593.01,164.73" P2="597.01,153.73"/><JD c="0B0707,3,0.9,0" P1="597.01,153.73" P2="602.01,166.73"/><JD c="0B0707,3,0.9,0" P1="597.01,154.73" P2="604.01,166.73"/><JD c="0B0707,3,0.9,0" P1="596.01,166.73" P2="602.01,165.73"/><JD c="0B0707,3,0.9,0" P1="608.01,150.73" P2="608.01,165.73"/><JD c="0B0707,3,0.9,0" P1="608.01,165.73" P2="618.01,165.73"/><JD c="0B0707,3,0.9,0" P1="623.01,151.73" P2="624.01,166.73"/><JD c="0B0707,3,0.9,0" P1="624.01,150.73" P2="630.01,151.73"/><JD c="0B0707,3,0.9,0" P1="630.01,151.73" P2="633.01,158.73"/><JD c="0B0707,3,0.9,0" P1="633.01,158.73" P2="632.01,162.73"/><JD c="0B0707,3,0.9,0" P1="632.01,163.73" P2="629.01,166.73"/><JD c="0B0707,3,0.9,0" P1="629.01,166.73" P2="627.01,166.73"/><JD c="0B0707,3,0.9,0" P1="641.01,154.73" P2="639.01,160.73"/><JD c="0B0707,3,0.9,0" P1="639.01,160.73" P2="642.01,165.73"/><JD c="0B0707,3,0.9,0" P1="642.01,165.73" P2="648.01,164.73"/><JD c="0B0707,3,0.9,0" P1="648.01,164.73" P2="648.01,155.73"/><JD c="0B0707,3,0.9,0" P1="648.01,155.73" P2="643.01,154.73"/><JD c="0B0707,3,0.9,0" P1="643.01,154.73" P2="640.01,154.73"/><JD c="0B0707,10,0.9,0" P1="379.01,312.73" P2="365.01,314.73"/><JD c="0B0707,10,0.9,0" P1="365.01,314.73" P2="369.01,319.73"/><JD c="0B0707,10,0.9,0" P1="369.01,319.73" P2="352.01,340.73"/><JD c="0B0707,10,0.9,0" P1="352.01,340.73" P2="347.01,348.73"/><JD c="0B0707,10,0.9,0" P1="347.01,348.73" P2="349.01,355.73"/><JD c="0B0707,10,0.9,0" P1="349.01,355.73" P2="347.01,362.73"/><JD c="0B0707,10,0.9,0" P1="348.01,362.73" P2="353.01,363.73"/><JD c="0B0707,10,0.9,0" P1="358.01,361.73" P2="365.01,338.73"/><JD c="0B0707,10,0.9,0" P1="356.01,364.73" P2="355.01,372.73"/><JD c="0B0707,10,0.9,0" P1="355.01,372.73" P2="360.01,372.73"/><JD c="0B0707,10,0.9,0" P1="361.01,372.73" P2="376.01,344.73"/><JD c="0B0707,10,0.9,0" P1="376.01,344.73" P2="371.01,373.73"/><JD c="0B0707,10,0.9,0" P1="371.01,373.73" P2="374.01,373.73"/><JD c="0B0707,10,0.9,0" P1="377.01,370.73" P2="379.01,352.73"/><JD c="0B0707,10,0.9,0" P1="379.01,351.73" P2="398.01,341.73"/><JD c="0B0707,10,0.9,0" P1="398.01,341.73" P2="383.01,312.73"/><JD c="0B0707,10,0.9,0" P1="397.01,339.73" P2="436.01,302.73"/><JD c="0B0707,10,0.9,0" P1="436.01,302.73" P2="480.01,275.73"/><JD c="0B0707,10,0.9,0" P1="480.01,275.73" P2="492.01,254.73"/><JD c="0B0707,10,0.9,0" P1="492.01,254.73" P2="509.01,250.73"/><JD c="0B0707,10,0.9,0" P1="509.01,250.73" P2="530.01,227.73"/><JD c="0B0707,10,0.9,0" P1="779.01,340.73" P2="814.01,374.73"/><JD c="0B0707,10,0.9,0" P1="814.01,374.73" P2="821.01,373.73"/><JD c="0B0707,10,0.9,0" P1="821.01,373.73" P2="807.01,354.73"/><JD c="0B0707,10,0.9,0" P1="818.01,350.73" P2="827.01,361.73"/><JD c="0B0707,10,0.9,0" P1="828.01,361.73" P2="832.01,371.73"/><JD c="0B0707,10,0.9,0" P1="832.01,371.73" P2="824.01,371.73"/><JD c="0B0707,10,0.9,0" P1="830.01,363.73" P2="839.01,363.73"/><JD c="0B0707,10,0.9,0" P1="842.01,364.73" P2="839.01,355.73"/><JD c="0B0707,10,0.9,0" P1="839.01,355.73" P2="849.01,354.73"/><JD c="0B0707,10,0.9,0" P1="850.01,353.73" P2="820.01,326.73"/><JD c="0B0707,10,0.9,0" P1="820.01,326.73" P2="841.01,318.73"/><JD c="0B0707,10,0.9,0" P1="839.01,317.73" P2="839.01,310.73"/><JD c="0B0707,10,0.9,0" P1="839.01,310.73" P2="797.01,310.73"/><JD c="0B0707,10,0.9,0" P1="586.01,100.73" P2="595.01,111.73"/><JD c="0B0707,10,0.9,0" P1="595.01,111.73" P2="623.01,110.73"/><JD c="0B0707,10,0.9,0" P1="623.01,110.73" P2="633.01,70.73"/><JD c="0B0707,10,0.9,0" P1="633.01,70.73" P2="640.01,74.73"/><JD c="097B00,10,0.9,0" P1="278.01,76.73" P2="317.01,77.73"/><JD c="097B00,10,0.9,0" P1="276.01,78.73" P2="275.01,159.73"/><JD c="097B00,10,0.9,0" P1="278.01,115.73" P2="290.01,115.73"/><JD c="032900,10,0.9,0" P1="378.01,162.73" P2="379.01,114.73"/><JD c="032900,10,0.9,0" P1="348.01,162.73" P2="378.01,162.73"/><JD c="032900,10,0.9,0" P1="348.01,111.73" P2="348.01,162.73"/><JD c="097B00,10,0.9,0" P1="404.01,118.73" P2="444.01,118.73"/><JD c="097B00,10,0.9,0" P1="422.01,117.73" P2="423.01,163.73"/><JD c="032900,10,0.9,0" P1="478.01,114.73" P2="512.01,114.73"/><JD c="032900,10,0.9,0" P1="475.01,116.73" P2="475.01,165.73"/><JD c="032900,10,0.9,0" P1="477.01,142.73" P2="488.01,141.73"/><JD c="032900,10,0.9,0" P1="475.01,165.73" P2="508.01,163.73"/><JD c="097B00,10,0.9,0" P1="550.01,130.73" P2="536.01,116.73"/><JD c="097B00,10,0.9,0" P1="531.01,116.73" P2="531.01,166.73"/><JD c="097B00,10,0.9,0" P1="550.01,152.73" P2="537.01,142.73"/><JD c="032900,10,0.9,0" P1="617.01,160.73" P2="617.01,122.73"/><JD c="032900,10,0.9,0" P1="581.01,118.73" P2="581.01,160.73"/><JD c="032900,10,0.9,0" P1="581.01,160.73" P2="617.01,160.73"/><JD c="032900,10,0.9,0" P1="617.01,122.73" P2="587.01,122.73"/><JD c="097B00,10,0.9,0" P1="649.01,165.73" P2="678.01,166.73"/><JD c="097B00,10,0.9,0" P1="651.01,123.73" P2="649.01,165.73"/><JD c="097B00,10,0.9,0" P1="532.01,168.73" P2="549.01,155.73"/><JD c="032900,10,0.9,0" P1="502.01,196.73" P2="502.01,222.73"/><JD c="032900,10,0.9,0" P1="473.01,187.73" P2="473.01,243.73"/><JD c="032900,10,0.9,0" P1="474.01,183.73" P2="502.01,196.73"/><JD c="032900,10,0.9,0" P1="502.01,222.73" P2="480.01,244.73"/><JD c="097B00,10,0.9,1" P1="554.01,213.73" P2="533.01,213.73"/><JD c="097B00,10,0.9,0" P1="554.01,241.73" P2="554.01,213.73"/><JD c="097B00,10,0.9,0" P1="528.01,214.73" P2="527.01,243.73"/><JD c="097B00,10,0.9,0" P1="527.01,243.73" P2="554.01,241.73"/><JD c="032900,10,0.9,0" P1="571.01,221.73" P2="589.01,228.73"/><JD c="032900,10,0.9,0" P1="592.01,204.73" P2="571.01,221.73"/><JD c="032900,10,0.9,0" P1="589.01,228.73" P2="569.01,246.73"/><JD c="097B00,10,0.9,0" P1="565.01,268.73" P2="534.01,282.73"/><JD c="097B00,10,0.9,0" P1="528.01,304.73" P2="526.01,330.73"/><JD c="097B00,10,0.9,0" P1="539.01,345.73" P2="563.01,352.73"/><JD c="097B00,10,0.9,0" P1="526.01,330.73" P2="539.01,345.73"/><JD c="032900,10,0.9,0" P1="596.01,307.73" P2="617.01,317.73"/><JD c="032900,10,0.9,0" P1="617.01,317.73" P2="600.01,336.73"/><JD c="032900,10,0.9,0" P1="600.01,336.73" P2="619.01,352.73"/><JD c="032900,10,0.9,0" P1="593.01,357.73" P2="596.01,307.73"/><JD c="097B00,10,0.9,0" P1="637.01,315.73" P2="637.01,347.73"/><JD c="097B00,10,0.9,0" P1="637.01,296.73" P2="637.01,297.73"/><JD c="032900,10,0.9,0" P1="657.01,347.73" P2="670.01,299.73"/><JD c="032900,10,0.9,0" P1="662.01,333.73" P2="680.01,333.73"/><JD c="032900,10,0.9,0" P1="670.01,299.73" P2="684.01,343.73"/></L></Z></C>')

local bs = 0
local rs = 0
local bola = tfm.exec.addShamanObject(604, 600, 200)
local lteam = "blue"
local text = "<font size='30'><font color='#FF0000'>" .. rs .. "<font color='#FFFFFF'>x<font color='#0000FF'>" .. bs
local red = {}
local blue = {}

ui.addTextArea(0, text, nil, 400, 50, 0, 0, 0xF, 0xF, 0, true)
tfm.exec.addImage("18c472e2ee8.png", "#"..bola, -15, -15, nil, 0.1, 0.1)

eventLoop = function()
	ptd = false
    for name in pairs(tfm.get.room.playerList) do
        local px = tfm.get.room.playerList[name].x
        local py = tfm.get.room.playerList[name].y
        local bx, by

        if tfm.get.room.objectList[bola] then
            bx = tfm.get.room.objectList[bola].x
            by = tfm.get.room.objectList[bola].y

            local distance = math.sqrt((px - bx) ^ 2 + (py - by) ^ 2)
            if distance <= 50 and lagball == true then
                tfm.exec.moveObject(bola, bx, by)
            end
        end
		if bx and by then
            if bx > 1100 and ptd == false and by >= 217 and by <= 315 then
                tfm.exec.moveObject(bola, 600, 100, nil, 0, 0, nil)
                rs = rs + 1
                ptd = true
                text = "<font size='30'><font color='#FF0000'>" .. rs .. "<font color='#FFFFFF'>x<font color='#0000FF'>" .. bs
                ui.updateTextArea(0, text, nil)
			for name in pairs(tfm.get.room.playerList) do
                if red[name] then
                    tfm.exec.movePlayer(name, 450, 345)
                elseif blue[name] then
                    tfm.exec.movePlayer(name, 750, 345)
                end
            end

            elseif bx < 100 and ptd == false and by >= 217 and by <= 315 then
                tfm.exec.moveObject(bola, 600, 100)
                bs = bs + 1
                ptd = true
                text = "<font size='30'><font color='#FF0000'>" .. rs .. "<font color='#FFFFFF'>x<font color='#0000FF'>" .. bs
                ui.updateTextArea(0, text, nil)
			for name in pairs(tfm.get.room.playerList) do
                if red[name] == true then
                    tfm.exec.movePlayer(name, 450, 345)
                elseif blue[name] == true then
                    tfm.exec.movePlayer(name, 750, 345)
                   end
                end
            end
        end
    end
end

for name, player in pairs(tfm.get.room.playerList) do
    if lteam == "red" then
        tfm.exec.movePlayer(name, 450, 345)
        tfm.exec.setNameColor(name, 0xFF0000)
        red[name] = true
        lteam = "blue"
    elseif lteam == "blue" then
        tfm.exec.movePlayer(name, 750, 345)
        tfm.exec.setNameColor(name, 0x0000FF)
        blue[name] = true
        lteam = "red"
    end
end
